"use strict";function calcPrice(t){var r="总计："+$("#c-price").attr("data-price")*t+"元";$(".total-price").html(r)}function render(t){$.ajax({type:"get",url:"../../interface/productList.php",data:{pro_id:t},beforeSend:function(){$(".productInfo").html('<div class="warning">数据加载中，请稍等···</div>'),NProgress.configure(),NProgress.start()},dataType:"json",success:function(t){var r=template("productInfo",{data:t[0]});$(".productInfo").html(r)},complete:function(){NProgress.done()}})}$(function(){var t=location.href;if(t=t.split("?")[1]){getCookie("username")||($(".add-btn").find("a").attr("href","../pages/login.html"),$(".add-btn").find("a").html("请先登录"));var a=t.split("=")[1];render(a),$(".productInfo").on("click",".add-btn",function(){var t=a,r=$(".product").find("h2").html(),n=$(".nums").html(),e=$("#c-price").attr("data-price"),c=$(".img-left").find("img").attr("src"),o=getCookie("userId");$.ajax({type:"post",url:"../../interface/cartAdd.php",data:{proId:t,proName:r,nums:n,price:e,image:c,uId:o},beforeSend:function(){NProgress.configure(),NProgress.start()},dataType:"json",success:function(t){1==t.code&&(location.href="../pages/cart.html")},complete:function(){NProgress.done()}})}),$(".productInfo").on("click",".sub",function(){var t=$(".nums").html();1!=t?(t--,$(".nums").html(t),calcPrice(t)):alert("数量不能为0")}),$(".productInfo").on("click",".add",function(){var t=$(".nums").html();t++,$(".nums").html(t),calcPrice(t)})}else $(".productInfo").html('<div class="warning">请不要直接访问该页面！</div>')});